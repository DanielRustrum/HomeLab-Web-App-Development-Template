services:
  workspace:
    build:
      context: ../..
      dockerfile: ops/docker/Dockerfile
    container_name: framework_workspace
    working_dir: /workspace
    volumes:
      - "${NAMI_WORKSPACE_DIR:-../..}:/workspace"
      - workspace_home:/home
      - workspace_venv:/workspace/.venv
      - workspace_node_modules:/workspace/node_modules
      - workspace_frontend_node_modules:/workspace/frontend/node_modules
    ports:
      - "${TSUNAMI_PORT:-23541}:23541"
    environment:
      TSUNAMI_PORT: "23541"
    command: ["sleep", "infinity"]

volumes:
  workspace_home:
  workspace_venv:
  workspace_node_modules:
  workspace_frontend_node_modules:
